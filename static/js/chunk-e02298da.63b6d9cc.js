(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e02298da"],{"1a7f":function(e,t,o){},2528:function(e,t,o){"use strict";var r=o("1a7f"),a=o.n(r);a.a},"751a":function(e,t,o){"use strict";o("d3b7"),o("ac1f"),o("5319");var r=o("2b0e"),a=o("bc3a"),n=o.n(a),s=o("a7fe"),i=o.n(s),c=o("a18c"),u=o("4360"),d=o("d54e"),l=o("74d7");r["default"].use(i.a,n.a),r["default"].use(d["install"],{components:{Message:d["Message"]},prototypes:d["Prototypes"]});var m=function(e){Object(d["Message"])({text:e,duration:1e3,type:"error"})},f=function(){c["a"].replace({path:"/login",query:{redirect:c["a"].currentRoute.fullPath}})},p=function(e,t){switch(e){case 401:f();break;case 403:m("登录过期，请重新登录"),l["Utils"].removeCookie("token"),u["a"].commit("loginSuccess",null),setTimeout((function(){f()}),1e3);break;case 404:m("请求的资源不存在");break;default:console.log(t)}},v=n.a.create({timeout:12e3});v.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",v.interceptors.request.use((function(e){var t=u["a"].state.token;return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.error(e)})),v.interceptors.response.use((function(e){return 200===e.status?Promise.resolve(e.data):Promise.reject(e)}),(function(e){console.log(e);var t=e.response;return p(t.status,t.data.message),Promise.reject(t)})),t["a"]=v},"9ed6":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("section",{staticClass:"login-container"},[o("h2",{directives:[{name:"margin",rawName:"v-margin",value:30,expression:"30"}],staticClass:"primary-color text-center"},[e._v("登录")]),o("Form",{ref:"form",attrs:{"valid-on-change":"","show-error-tip":"","label-width":110,rules:e.validationRules,"label-position":"left",model:e.model,top:.2}},[o("FormItem",{attrs:{label:"用户名",prop:"name"},scopedSlots:e._u([{key:"label",fn:function(){return[o("i",{staticClass:"h-icon-user"}),e._v(" 用户名")]},proxy:!0}])},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.model.name,expression:"model.name"}],attrs:{type:"text"},domProps:{value:e.model.name},on:{input:function(t){t.target.composing||e.$set(e.model,"name",t.target.value)}}})]),o("FormItem",{attrs:{label:"密码",icon:"h-icon-complete",prop:"password"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.model.password,expression:"model.password"}],attrs:{type:"password"},domProps:{value:e.model.password},on:{input:function(t){t.target.composing||e.$set(e.model,"password",t.target.value)}}})]),o("FormItem",[o("Button",{attrs:{color:"primary",loading:e.isLoading},on:{click:e.submit}},[e._v("提交")]),e._v(" "),o("Button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)])},a=[],n=o("c63d"),s=n["a"],i=(o("2528"),o("2877")),c=Object(i["a"])(s,r,a,!1,null,"feceb670",null);t["default"]=c.exports},c24f:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var r=o("751a");function a(e){return Object(r["a"])({url:"/user/login",method:"post",data:e})}},c63d:function(e,t,o){"use strict";(function(e){o("99af"),o("b0c0");var r=o("c24f");t["a"]={components:{},data:function(){return{isLoading:!1,model:{name:"admin",password:"888888"},validationRules:{required:["name","password"]},redirect:void 0}},computed:{},watch:{$route:{handler:function(e){if(e.query&&e.query.redirect)for(var t in this.redirect="",e.query)this.redirect+="redirect"===t?"".concat(e.query[t],"&"):"".concat(t,"=").concat(e.query[t],"&");this.redirect=this.redirect.substring(0,this.redirect.length-1)},immediate:!0}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{submit:function(){var t=this;this.isLoading=!0;var o=this.$refs.form.valid();o.result?Object(r["a"])({username:this.model.name,password:this.model.password}).then((function(o){t.isLoading=!1,e.saveCookie("token",o.data.token),e.saveCookie("userName",o.data.userName),e.saveCookie("userImg",o.data.userImg),t.$router.push({path:t.redirect||"/"})})):this.isLoading=!1},reset:function(){this.$refs.form.resetValid()}}}}).call(this,o("ca00")["default"])}}]);