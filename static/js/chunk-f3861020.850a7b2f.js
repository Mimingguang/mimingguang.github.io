(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3861020"],{5299:function(e,t,o){"use strict";var a=o("84e3"),r=o.n(a);r.a},"751a":function(e,t,o){"use strict";(function(e,a){o("d3b7"),o("ac1f"),o("5319");var r=o("2b0e"),n=o("bc3a"),s=o.n(n),i=o("a7fe"),c=o.n(i),u=o("a18c"),d=o("4360");r["default"].use(c.a,s.a);var l=function(t){e.$Message({text:t,duration:1e3,type:"error"})},m=function(){u["a"].replace({path:"/login",query:{redirect:u["a"].currentRoute.fullPath}})},f=function(e,t){switch(e){case 401:m();break;case 403:l("登录过期，请重新登录"),a.removeCookie("token"),d["a"].commit("loginSuccess",null),setTimeout((function(){m()}),1e3);break;case 404:l("请求的资源不存在");break;case 400:l("用户名或密码错误");break;default:console.log(t)}},p=s.a.create({timeout:12e3});p.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",p.interceptors.request.use((function(t){var o=d["a"].state.token;return o&&(t.headers.Authorization=o),t.loading&&e.$Loading("加载中..."),t}),(function(e){return Promise.error(e)})),p.interceptors.response.use((function(t){return e.$Loading.close(),200===t.status&&200===t.data.code?Promise.resolve(t.data):(f(t.data.code,t.data.message),Promise.reject(t.data.message))}),(function(t){e.$Loading.close();var o=t.response;return f(o.status,o.data.message),Promise.reject(o)})),t["a"]=p}).call(this,o("d54e"),o("ca00")["default"])},"84e3":function(e,t,o){},"9ed6":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("section",{staticClass:"login-container"},[o("h2",{directives:[{name:"margin",rawName:"v-margin",value:30,expression:"30"}],staticClass:"primary-color text-center"},[e._v("登录")]),o("Form",{ref:"form",attrs:{"valid-on-change":"","show-error-tip":"","label-width":110,rules:e.validationRules,"label-position":"left",model:e.model,top:.2}},[o("FormItem",{attrs:{label:"用户名",prop:"name"},scopedSlots:e._u([{key:"label",fn:function(){return[o("i",{staticClass:"h-icon-user"}),e._v(" 用户名")]},proxy:!0}])},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.model.name,expression:"model.name"}],attrs:{type:"text"},domProps:{value:e.model.name},on:{input:function(t){t.target.composing||e.$set(e.model,"name",t.target.value)}}})]),o("FormItem",{attrs:{label:"密码",icon:"h-icon-complete",prop:"password"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.model.password,expression:"model.password"}],attrs:{type:"password"},domProps:{value:e.model.password},on:{input:function(t){t.target.composing||e.$set(e.model,"password",t.target.value)}}})]),o("FormItem",[o("Button",{attrs:{color:"primary",loading:e.isLoading},on:{click:e.submit}},[e._v("提交")]),e._v(" "),o("Button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)])},r=[],n=o("c63d"),s=n["a"],i=(o("5299"),o("2877")),c=Object(i["a"])(s,a,r,!1,null,"d05b22d4",null);t["default"]=c.exports},c24f:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var a=o("751a");function r(e){return Object(a["a"])({url:"/user/login",method:"post",data:e})}},c63d:function(e,t,o){"use strict";(function(e){o("99af"),o("b0c0");var a=o("c24f");t["a"]={components:{},data:function(){return{isLoading:!1,model:{name:"admin",password:"888888"},validationRules:{required:["name","password"]},redirect:void 0}},computed:{},watch:{$route:{handler:function(e){if(e.query&&e.query.redirect)for(var t in this.redirect="",e.query)this.redirect+="redirect"===t?"".concat(e.query[t],"&"):"".concat(t,"=").concat(e.query[t],"&");this.redirect=this.redirect.substring(0,this.redirect.length-1)},immediate:!0}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{submit:function(){var t=this;this.isLoading=!0;var o=this.$refs.form.valid();o.result?Object(a["a"])({username:this.model.name,password:this.model.password}).then((function(o){t.isLoading=!1,e.saveCookie("token",o.data.token),e.saveCookie("userName",o.data.userName),e.saveCookie("userImg",o.data.userImg),t.$router.push({path:t.redirect||"/"})})).catch((function(e){t.isLoading=!1,console.error(e)})):this.isLoading=!1},reset:function(){this.$refs.form.resetValid()}}}}).call(this,o("ca00")["default"])}}]);